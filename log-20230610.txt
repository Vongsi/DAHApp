2023-06-10 12:38:59.612 +07:00 [INF] User profile is available. Using 'C:\Users\Vongsi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-10 12:39:00.051 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-10 12:39:00.099 +07:00 [INF] Hosting environment: Development
2023-06-10 12:39:00.114 +07:00 [INF] Content root path: D:\Dev\Dotnet\API\DAHApp
2023-06-10 12:39:00.214 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/index.html - -
2023-06-10 12:39:01.511 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/index.html - - - 200 - text/html;charset=utf-8 1296.5674ms
2023-06-10 12:39:01.582 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - -
2023-06-10 12:39:01.591 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 8.2761ms
2023-06-10 12:39:01.628 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_vs/browserLink - -
2023-06-10 12:39:01.836 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 208.1990ms
2023-06-10 12:39:04.211 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - -
2023-06-10 12:39:04.580 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 368.2989ms
2023-06-10 12:40:18.067 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/v2/swagger.json - -
2023-06-10 12:40:18.079 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/v2/swagger.json - - - 200 - application/json;charset=utf-8 11.6792ms
2023-06-10 12:40:43.177 +07:00 [INF] Request starting HTTP/2 POST https://localhost:44376/api/v2/User/token application/json;+x-api-version=2.0 47
2023-06-10 12:40:43.447 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 12:40:43.472 +07:00 [INF] Route matched with {action = "GetToken", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(DAHApp.Models.TokenRequestModel) on controller DAHApp.Controllers.UserController (DAHApp).
2023-06-10 12:40:46.018 +07:00 [INF] Executed DbCommand (115ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[ApplicationUserId]
ORDER BY [t].[Id], [r].[ApplicationUserId]
2023-06-10 12:40:46.050 +07:00 [INF] string
2023-06-10 12:40:46.161 +07:00 [INF] Executed action DAHApp.Controllers.UserController.GetTokenAsync (DAHApp) in 2683.8871ms
2023-06-10 12:40:46.163 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 12:40:46.384 +07:00 [INF] Request finished HTTP/2 POST https://localhost:44376/api/v2/User/token application/json;+x-api-version=2.0 47 - 500 - application/json;+x-api-version=2 3231.2260ms
2023-06-10 12:41:12.451 +07:00 [INF] Request starting HTTP/2 POST https://localhost:44376/api/v2/User/token application/json;+x-api-version=2.0 57
2023-06-10 12:41:12.459 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 12:41:12.490 +07:00 [INF] Route matched with {action = "GetToken", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(DAHApp.Models.TokenRequestModel) on controller DAHApp.Controllers.UserController (DAHApp).
2023-06-10 12:41:12.554 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[ApplicationUserId]
ORDER BY [t].[Id], [r].[ApplicationUserId]
2023-06-10 12:41:12.660 +07:00 [INF] vongsi@dah.com
2023-06-10 12:41:12.777 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2023-06-10 12:41:12.805 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-06-10 12:41:13.144 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-06-10 12:41:13.151 +07:00 [INF] Executing OkObjectResult, writing value of type 'DAHApp.Models.AuthenticationModel'.
2023-06-10 12:41:13.162 +07:00 [INF] Executed action DAHApp.Controllers.UserController.GetTokenAsync (DAHApp) in 672.1218ms
2023-06-10 12:41:13.163 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 12:41:13.163 +07:00 [INF] Request finished HTTP/2 POST https://localhost:44376/api/v2/User/token application/json;+x-api-version=2.0 57 - 200 - application/json;+charset=utf-8;+x-api-version=2 714.2302ms
2023-06-10 12:51:18.719 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/v1/Secured - 0
2023-06-10 12:51:18.808 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/06/2023 3:53:59 PM', Current time (UTC): '10/06/2023 5:51:18 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-10 12:51:18.813 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/06/2023 3:53:59 PM', Current time (UTC): '10/06/2023 5:51:18 AM'.
2023-06-10 12:51:18.817 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '1/06/2023 3:53:59 PM', Current time (UTC): '10/06/2023 5:51:18 AM'.
2023-06-10 12:51:18.829 +07:00 [INF] ApiKey was not authenticated. Failure message: Header Not Found.
2023-06-10 12:51:18.836 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator)
2023-06-10 12:51:18.842 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-10 12:51:18.849 +07:00 [INF] AuthenticationScheme: ApiKey was challenged.
2023-06-10 12:51:18.850 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/v1/Secured - 0 - 401 - - 131.1868ms
2023-06-10 12:51:21.844 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/v2/Secured - 0
2023-06-10 12:51:21.908 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 12:51:21.938 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator)
2023-06-10 12:51:21.940 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-06-10 12:51:21.944 +07:00 [INF] AuthenticationScheme: ApiKey was forbidden.
2023-06-10 12:51:21.945 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/v2/Secured - 0 - 403 - - 101.2221ms
2023-06-10 12:51:27.159 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 12:51:27.171 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 12:51:27.175 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 12:51:27.177 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 12:51:27.180 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 12:51:27.181 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 3.3007ms
2023-06-10 12:51:27.181 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 12:51:27.181 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 22.1508ms
2023-06-10 12:51:28.769 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 12:51:28.774 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 12:51:28.776 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 12:51:28.776 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 12:51:28.777 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 12:51:28.782 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 5.0023ms
2023-06-10 12:51:28.782 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 12:51:28.783 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 14.7496ms
2023-06-10 12:51:29.968 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 12:51:29.976 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 12:51:29.977 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 12:51:29.977 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 12:51:29.977 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 12:51:29.979 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 2.3671ms
2023-06-10 12:51:29.979 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 12:51:29.980 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 11.5881ms
2023-06-10 12:51:33.252 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured - -
2023-06-10 12:51:33.254 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/06/2023 1:23:36 PM', Current time (UTC): '10/06/2023 5:51:33 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-10 12:51:33.255 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/06/2023 1:23:36 PM', Current time (UTC): '10/06/2023 5:51:33 AM'.
2023-06-10 12:51:33.255 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '8/06/2023 1:23:36 PM', Current time (UTC): '10/06/2023 5:51:33 AM'.
2023-06-10 12:51:33.256 +07:00 [INF] ApiKey was not authenticated. Failure message: Header Not Found.
2023-06-10 12:51:33.257 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-10 12:51:33.257 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-10 12:51:33.258 +07:00 [INF] AuthenticationScheme: ApiKey was challenged.
2023-06-10 12:51:33.259 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured - - - 401 - - 6.5526ms
2023-06-10 12:51:36.876 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/v1/User/token application/json 60
2023-06-10 12:51:36.876 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 12:51:36.877 +07:00 [INF] Route matched with {action = "GetToken", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(DAHApp.Models.TokenRequestModel) on controller DAHApp.Controllers.UserController (DAHApp).
2023-06-10 12:51:36.906 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[ApplicationUserId]
ORDER BY [t].[Id], [r].[ApplicationUserId]
2023-06-10 12:51:36.910 +07:00 [INF] vongsi@dah.com
2023-06-10 12:51:37.008 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2023-06-10 12:51:37.019 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-06-10 12:51:37.024 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-06-10 12:51:37.026 +07:00 [INF] Executing OkObjectResult, writing value of type 'DAHApp.Models.AuthenticationModel'.
2023-06-10 12:51:37.027 +07:00 [INF] Executed action DAHApp.Controllers.UserController.GetTokenAsync (DAHApp) in 149.9322ms
2023-06-10 12:51:37.027 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 12:51:37.028 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/v1/User/token application/json 60 - 200 - application/json;+charset=utf-8;+x-api-version=1 152.0505ms
2023-06-10 12:51:55.501 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured - -
2023-06-10 12:51:55.514 +07:00 [INF] ApiKey was not authenticated. Failure message: Header Not Found.
2023-06-10 12:51:55.514 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 12:51:55.518 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 12:51:55.587 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetSecuredData (DAHApp) in 68.6025ms
2023-06-10 12:51:55.587 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 12:51:55.604 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured - - - 404 - application/json;+x-api-version=1 103.3258ms
2023-06-10 13:13:33.838 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured - -
2023-06-10 13:13:33.840 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/06/2023 5:52:37 AM', Current time (UTC): '10/06/2023 6:13:33 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-10 13:13:33.841 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/06/2023 5:52:37 AM', Current time (UTC): '10/06/2023 6:13:33 AM'.
2023-06-10 13:13:33.841 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/06/2023 5:52:37 AM', Current time (UTC): '10/06/2023 6:13:33 AM'.
2023-06-10 13:13:33.845 +07:00 [INF] ApiKey was not authenticated. Failure message: Header Not Found.
2023-06-10 13:13:33.845 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-10 13:13:33.845 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-10 13:13:33.848 +07:00 [INF] AuthenticationScheme: ApiKey was challenged.
2023-06-10 13:13:33.849 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured - - - 401 - - 11.2615ms
2023-06-10 13:13:39.930 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 13:13:39.962 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:13:39.967 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:13:39.967 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 13:13:39.968 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 13:13:39.971 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 3.9413ms
2023-06-10 13:13:39.971 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:13:39.972 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 42.0169ms
2023-06-10 13:13:41.605 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 13:13:41.615 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:13:41.617 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:13:41.617 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 13:13:41.618 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 13:13:41.618 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 0.8068ms
2023-06-10 13:13:41.618 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:13:41.619 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 13.4042ms
2023-06-10 13:13:42.468 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 13:13:42.474 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:13:42.475 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:13:42.476 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 13:13:42.477 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 13:13:42.477 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 1.1726ms
2023-06-10 13:13:42.477 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:13:42.478 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 9.1792ms
2023-06-10 13:13:43.196 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 13:13:43.206 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:13:43.211 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:13:43.211 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 13:13:43.212 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 13:13:43.213 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 1.6207ms
2023-06-10 13:13:43.213 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:13:43.214 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 18.0963ms
2023-06-10 13:13:44.136 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 13:13:44.148 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:13:44.152 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:13:44.159 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 13:13:44.160 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 13:13:44.163 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 3.64ms
2023-06-10 13:13:44.163 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:13:44.165 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 28.9687ms
2023-06-10 13:13:50.661 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 13:13:50.667 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:13:50.668 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:13:50.668 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 13:13:50.668 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 13:13:50.669 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 1.0143ms
2023-06-10 13:13:50.669 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:13:50.670 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 8.5453ms
2023-06-10 13:14:57.476 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured - -
2023-06-10 13:14:57.478 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/06/2023 5:52:37 AM', Current time (UTC): '10/06/2023 6:14:57 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-10 13:14:57.478 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/06/2023 5:52:37 AM', Current time (UTC): '10/06/2023 6:14:57 AM'.
2023-06-10 13:14:57.478 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/06/2023 5:52:37 AM', Current time (UTC): '10/06/2023 6:14:57 AM'.
2023-06-10 13:14:57.481 +07:00 [INF] ApiKey was not authenticated. Failure message: Header Not Found.
2023-06-10 13:14:57.481 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-10 13:14:57.481 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-10 13:14:57.483 +07:00 [INF] AuthenticationScheme: ApiKey was challenged.
2023-06-10 13:14:57.483 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured - - - 401 - - 7.0264ms
2023-06-10 13:15:02.686 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 13:15:02.703 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:15:02.707 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:15:02.708 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 13:15:02.709 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 13:15:02.710 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 1.9515ms
2023-06-10 13:15:02.711 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 13:15:02.711 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 25.1094ms
2023-06-10 13:15:06.129 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/v2/Secured - 0
2023-06-10 13:15:06.141 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:15:06.142 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator)
2023-06-10 13:15:06.143 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-06-10 13:15:06.145 +07:00 [INF] AuthenticationScheme: ApiKey was forbidden.
2023-06-10 13:15:06.147 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/v2/Secured - 0 - 403 - - 17.4163ms
2023-06-10 13:15:07.194 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/v2/Secured - 0
2023-06-10 13:15:07.199 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:15:07.202 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator)
2023-06-10 13:15:07.202 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-06-10 13:15:07.204 +07:00 [INF] AuthenticationScheme: ApiKey was forbidden.
2023-06-10 13:15:07.205 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/v2/Secured - 0 - 403 - - 10.9046ms
2023-06-10 13:15:13.653 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/User/tokens/a8b70af5-ef27-4650-873d-bb47eebf2392 - 0
2023-06-10 13:15:13.654 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '31/05/2023 4:18:44 PM', Current time (UTC): '10/06/2023 6:15:13 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-10 13:15:13.654 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '31/05/2023 4:18:44 PM', Current time (UTC): '10/06/2023 6:15:13 AM'.
2023-06-10 13:15:13.655 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/User/tokens/a8b70af5-ef27-4650-873d-bb47eebf2392 - 0 - 404 - - 2.2601ms
2023-06-10 13:15:15.051 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/User/tokens/a8b70af5-ef27-4650-873d-bb47eebf2392 - 0
2023-06-10 13:15:15.052 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '31/05/2023 4:18:44 PM', Current time (UTC): '10/06/2023 6:15:15 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-10 13:15:15.052 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '31/05/2023 4:18:44 PM', Current time (UTC): '10/06/2023 6:15:15 AM'.
2023-06-10 13:15:15.052 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/User/tokens/a8b70af5-ef27-4650-873d-bb47eebf2392 - 0 - 404 - - 1.8452ms
2023-06-10 13:15:15.818 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/User/tokens/a8b70af5-ef27-4650-873d-bb47eebf2392 - 0
2023-06-10 13:15:15.819 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '31/05/2023 4:18:44 PM', Current time (UTC): '10/06/2023 6:15:15 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-10 13:15:15.819 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '31/05/2023 4:18:44 PM', Current time (UTC): '10/06/2023 6:15:15 AM'.
2023-06-10 13:15:15.820 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/User/tokens/a8b70af5-ef27-4650-873d-bb47eebf2392 - 0 - 404 - - 1.9933ms
2023-06-10 13:15:36.836 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/v1/User/tokens/a8b70af5-ef27-4650-873d-bb47eebf2392 - 0
2023-06-10 13:15:36.838 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '31/05/2023 4:18:44 PM', Current time (UTC): '10/06/2023 6:15:36 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-10 13:15:36.838 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '31/05/2023 4:18:44 PM', Current time (UTC): '10/06/2023 6:15:36 AM'.
2023-06-10 13:15:36.840 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-10 13:15:36.841 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-10 13:15:36.843 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/v1/User/tokens/a8b70af5-ef27-4650-873d-bb47eebf2392 - 0 - 401 - - 6.6295ms
2023-06-10 13:15:46.592 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/v1/Secured/upload-files?code=ABCode - 0
2023-06-10 13:15:46.612 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:15:46.615 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp)'
2023-06-10 13:15:46.620 +07:00 [INF] Route matched with {action = "UploadFiles", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFiles(Microsoft.AspNetCore.Http.IFormFileCollection, System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:15:46.632 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 13:15:46.633 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp) in 13.0963ms
2023-06-10 13:15:46.633 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp)'
2023-06-10 13:15:46.634 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/v1/Secured/upload-files?code=ABCode - 0 - 200 - text/plain;+charset=utf-8;+x-api-version=1 41.7540ms
2023-06-10 13:16:12.742 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/v1/Secured/upload-files?code=ABCode - 0
2023-06-10 13:16:12.774 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:16:12.778 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp)'
2023-06-10 13:16:12.778 +07:00 [INF] Route matched with {action = "UploadFiles", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFiles(Microsoft.AspNetCore.Http.IFormFileCollection, System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:16:12.780 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 13:16:12.781 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp) in 2.8196ms
2023-06-10 13:16:12.781 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp)'
2023-06-10 13:16:12.782 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/v1/Secured/upload-files?code=ABCode - 0 - 200 - text/plain;+charset=utf-8;+x-api-version=1 39.6909ms
2023-06-10 13:16:36.477 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/v1/Secured/upload-files?code=ABCode multipart/form-data;+boundary=--------------------------035572619902476478000106 52400
2023-06-10 13:16:36.491 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:16:36.501 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp)'
2023-06-10 13:16:36.501 +07:00 [INF] Route matched with {action = "UploadFiles", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFiles(Microsoft.AspNetCore.Http.IFormFileCollection, System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:16:36.763 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = -1) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DocumentModel] ([Id], [Content], [Name], [Type])
VALUES (@p0, @p1, @p2, @p3);
2023-06-10 13:16:36.779 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 13:16:36.780 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp) in 278.3543ms
2023-06-10 13:16:36.780 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp)'
2023-06-10 13:16:36.781 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/v1/Secured/upload-files?code=ABCode multipart/form-data;+boundary=--------------------------035572619902476478000106 52400 - 200 - text/plain;+charset=utf-8;+x-api-version=1 303.5655ms
2023-06-10 13:16:51.310 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=C7BF9D80-E8CC-41F8-3E73-08DB64FECCCA - -
2023-06-10 13:16:51.315 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:16:51.316 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:16:51.319 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:16:51.357 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 13:17:03.085 +07:00 [INF] Executing FileContentResult, sending file with download name 'PARTY INVITATION.docx' ...
2023-06-10 13:17:03.204 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 11884.259ms
2023-06-10 13:17:03.205 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:17:03.229 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=C7BF9D80-E8CC-41F8-3E73-08DB64FECCCA - - - 200 13476955 application/vnd.openxmlformats-officedocument.wordprocessingml.document;+x-api-version=1 11919.3394ms
2023-06-10 13:18:33.160 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=A0658612-4530-435C-83BA-08DB697A3EED - -
2023-06-10 13:18:33.171 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:18:33.173 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:18:33.173 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:18:33.180 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 13:18:33.182 +07:00 [INF] Executing FileContentResult, sending file with download name '1881a0e09feab833e88e7e4a43526ff3.jpg' ...
2023-06-10 13:18:33.184 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 10.9519ms
2023-06-10 13:18:33.184 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:18:33.185 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=A0658612-4530-435C-83BA-08DB697A3EED - - - 200 52155 image/jpeg;+x-api-version=1 25.1097ms
2023-06-10 13:18:41.902 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=A0658612-4530-435C-83BA-08DB697A3EED - -
2023-06-10 13:18:41.916 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:18:41.921 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:18:41.922 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:18:41.930 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 13:18:41.934 +07:00 [INF] Executing FileContentResult, sending file with download name '1881a0e09feab833e88e7e4a43526ff3.jpg' ...
2023-06-10 13:18:41.938 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 16.173ms
2023-06-10 13:18:41.938 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:18:41.939 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=A0658612-4530-435C-83BA-08DB697A3EED - - - 200 52155 image/jpeg;+x-api-version=1 36.7445ms
2023-06-10 13:19:01.868 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=A0658612-4530-435C-83BA-08DB697A3EED - -
2023-06-10 13:19:01.876 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:19:01.877 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:19:01.878 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:19:01.884 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 13:19:01.887 +07:00 [INF] Executing FileContentResult, sending file with download name '1881a0e09feab833e88e7e4a43526ff3.jpg' ...
2023-06-10 13:19:01.888 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 10.6332ms
2023-06-10 13:19:01.889 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:19:01.889 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=A0658612-4530-435C-83BA-08DB697A3EED - - - 200 52155 image/jpeg;+x-api-version=1 20.7881ms
2023-06-10 13:37:57.675 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=A0658612-4530-435C-83BA-08DB697A3EED - -
2023-06-10 13:37:57.718 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:37:57.720 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:37:57.721 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:37:57.741 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 13:37:57.744 +07:00 [INF] Executing FileContentResult, sending file with download name '1881a0e09feab833e88e7e4a43526ff3.jpg' ...
2023-06-10 13:37:57.748 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 26.8454ms
2023-06-10 13:37:57.748 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:37:57.749 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=A0658612-4530-435C-83BA-08DB697A3EED - - - 200 52155 image/jpeg;+x-api-version=1 74.1298ms
2023-06-10 13:44:59.770 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=A0658612-4530-435C-83BA-08DB697A3EED - -
2023-06-10 13:44:59.836 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:44:59.838 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:44:59.838 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:44:59.859 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 13:44:59.862 +07:00 [INF] Executing FileContentResult, sending file with download name '1881a0e09feab833e88e7e4a43526ff3.jpg' ...
2023-06-10 13:44:59.863 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 25.0115ms
2023-06-10 13:44:59.864 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:44:59.864 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=A0658612-4530-435C-83BA-08DB697A3EED - - - 200 52155 image/jpeg;+x-api-version=1 94.6791ms
2023-06-10 13:45:01.117 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=A0658612-4530-435C-83BA-08DB697A3EED - -
2023-06-10 13:45:01.133 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:45:01.136 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:45:01.136 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:45:01.157 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 13:45:01.182 +07:00 [INF] Executing FileContentResult, sending file with download name '1881a0e09feab833e88e7e4a43526ff3.jpg' ...
2023-06-10 13:45:01.185 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 49.0241ms
2023-06-10 13:45:01.185 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:45:01.186 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=A0658612-4530-435C-83BA-08DB697A3EED - - - 200 52155 image/jpeg;+x-api-version=1 68.9471ms
2023-06-10 13:49:49.375 +07:00 [INF] User profile is available. Using 'C:\Users\Vongsi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-10 13:49:49.913 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-10 13:49:49.919 +07:00 [INF] Hosting environment: Development
2023-06-10 13:49:49.926 +07:00 [INF] Content root path: D:\Dev\Dotnet\API\DAHApp
2023-06-10 13:49:49.985 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/index.html - -
2023-06-10 13:49:50.990 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/index.html - - - 200 - text/html;charset=utf-8 1008.8056ms
2023-06-10 13:49:50.995 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - -
2023-06-10 13:49:51.009 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 12.9535ms
2023-06-10 13:49:51.036 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_vs/browserLink - -
2023-06-10 13:49:51.157 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 120.2509ms
2023-06-10 13:49:51.409 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - -
2023-06-10 13:49:51.815 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 400.8977ms
2023-06-10 13:50:57.390 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/v1/Secured/upload-files?code=ABCode multipart/form-data;+boundary=--------------------------802207034196182838467600 242783
2023-06-10 13:51:05.695 +07:00 [INF] Executed DbCommand (295ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:51:06.315 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp)'
2023-06-10 13:51:06.380 +07:00 [INF] Route matched with {action = "UploadFiles", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFiles(Microsoft.AspNetCore.Http.IFormFileCollection, System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:51:07.081 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = -1) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DocumentModel] ([Id], [Content], [Name], [Type])
VALUES (@p0, @p1, @p2, @p3);
2023-06-10 13:51:07.164 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = -1) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DocumentModel] ([Id], [Content], [Name], [Type])
VALUES (@p0, @p1, @p2, @p3);
2023-06-10 13:51:07.182 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = -1) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DocumentModel] ([Id], [Content], [Name], [Type])
VALUES (@p0, @p1, @p2, @p3);
2023-06-10 13:51:07.201 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = -1) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DocumentModel] ([Id], [Content], [Name], [Type])
VALUES (@p0, @p1, @p2, @p3);
2023-06-10 13:51:07.232 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-10 13:51:07.265 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp) in 872.0209ms
2023-06-10 13:51:07.269 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp)'
2023-06-10 13:51:07.301 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/v1/Secured/upload-files?code=ABCode multipart/form-data;+boundary=--------------------------802207034196182838467600 242783 - 200 - application/json;+charset=utf-8;+x-api-version=1 9911.8602ms
2023-06-10 13:51:58.029 +07:00 [INF] User profile is available. Using 'C:\Users\Vongsi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-10 13:51:58.406 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-10 13:51:58.414 +07:00 [INF] Hosting environment: Development
2023-06-10 13:51:58.428 +07:00 [INF] Content root path: D:\Dev\Dotnet\API\DAHApp
2023-06-10 13:51:58.465 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/index.html - -
2023-06-10 13:51:59.061 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - -
2023-06-10 13:51:59.062 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_vs/browserLink - -
2023-06-10 13:51:59.062 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/index.html - - - 200 - text/html;charset=utf-8 598.5929ms
2023-06-10 13:51:59.076 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 12.7641ms
2023-06-10 13:51:59.205 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 143.4053ms
2023-06-10 13:51:59.434 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - -
2023-06-10 13:51:59.861 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 426.6263ms
2023-06-10 13:52:36.111 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/api/v1/Secured/upload-files?code=ABCode multipart/form-data;+boundary=--------------------------336826721328501498606106 242783
2023-06-10 13:52:42.144 +07:00 [INF] Executed DbCommand (172ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:52:42.821 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp)'
2023-06-10 13:52:42.896 +07:00 [INF] Route matched with {action = "UploadFiles", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFiles(Microsoft.AspNetCore.Http.IFormFileCollection, System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:52:43.622 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = -1) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DocumentModel] ([Id], [Content], [Name], [Type])
VALUES (@p0, @p1, @p2, @p3);
2023-06-10 13:52:43.706 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = -1) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DocumentModel] ([Id], [Content], [Name], [Type])
VALUES (@p0, @p1, @p2, @p3);
2023-06-10 13:52:43.738 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = -1) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DocumentModel] ([Id], [Content], [Name], [Type])
VALUES (@p0, @p1, @p2, @p3);
2023-06-10 13:52:43.757 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = -1) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DocumentModel] ([Id], [Content], [Name], [Type])
VALUES (@p0, @p1, @p2, @p3);
2023-06-10 13:52:43.803 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-10 13:52:43.848 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp) in 940.0191ms
2023-06-10 13:52:43.853 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.UploadFiles (DAHApp)'
2023-06-10 13:52:43.881 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44376/api/v1/Secured/upload-files?code=ABCode multipart/form-data;+boundary=--------------------------336826721328501498606106 242783 - 200 - application/json;+charset=utf-8;+x-api-version=1 7778.6819ms
2023-06-10 13:53:03.961 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=1779b506-9b7c-4f32-3a01-08db697f4a50 - -
2023-06-10 13:53:04.070 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:53:04.081 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:53:04.106 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:53:04.186 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 13:53:04.212 +07:00 [INF] Executing FileContentResult, sending file with download name '657c5ab506a65f708124433703835296.jpg' ...
2023-06-10 13:53:04.225 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 118.7909ms
2023-06-10 13:53:04.226 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:53:04.227 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=1779b506-9b7c-4f32-3a01-08db697f4a50 - - - 200 54944 image/jpeg;+x-api-version=1 265.6871ms
2023-06-10 13:53:18.472 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - -
2023-06-10 13:53:18.682 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:53:18.687 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:53:18.687 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:53:18.705 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 13:53:18.708 +07:00 [INF] Executing FileContentResult, sending file with download name 'fc924b1989aa443da5190aa8df7b8f00.jpg' ...
2023-06-10 13:53:18.712 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 24.1901ms
2023-06-10 13:53:18.725 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:53:18.725 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - - - 200 47530 image/jpeg;+x-api-version=1 252.9934ms
2023-06-10 13:53:42.788 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - -
2023-06-10 13:53:42.805 +07:00 [INF] ApiKey was not authenticated. Failure message: Header Not Found.
2023-06-10 13:53:42.807 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-10 13:53:42.821 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-10 13:53:42.835 +07:00 [INF] AuthenticationScheme: ApiKey was challenged.
2023-06-10 13:53:42.839 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - - - 401 - - 51.5270ms
2023-06-10 13:54:00.526 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - -
2023-06-10 13:54:00.566 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:54:00.576 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:54:00.577 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:54:00.595 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 13:54:00.601 +07:00 [INF] Executing FileContentResult, sending file with download name 'fc924b1989aa443da5190aa8df7b8f00.jpg' ...
2023-06-10 13:54:00.603 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 26.2274ms
2023-06-10 13:54:00.604 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:54:00.604 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - - - 200 47530 image/jpeg;+x-api-version=1 78.3223ms
2023-06-10 13:54:02.085 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - -
2023-06-10 13:54:02.123 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:54:02.128 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:54:02.129 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:54:02.155 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 13:54:02.167 +07:00 [INF] Executing FileContentResult, sending file with download name 'fc924b1989aa443da5190aa8df7b8f00.jpg' ...
2023-06-10 13:54:02.169 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 40.3065ms
2023-06-10 13:54:02.170 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:54:02.170 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - - - 200 47530 image/jpeg;+x-api-version=1 84.7130ms
2023-06-10 13:54:03.318 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - -
2023-06-10 13:54:03.334 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 13:54:03.337 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:54:03.337 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 13:54:03.350 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 13:54:03.352 +07:00 [INF] Executing FileContentResult, sending file with download name 'fc924b1989aa443da5190aa8df7b8f00.jpg' ...
2023-06-10 13:54:03.354 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 16.2372ms
2023-06-10 13:54:03.354 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 13:54:03.355 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - - - 200 47530 image/jpeg;+x-api-version=1 36.3704ms
2023-06-10 14:05:03.190 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/v2/swagger.json - -
2023-06-10 14:05:03.256 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/v2/swagger.json - - - 200 - application/json;charset=utf-8 70.7301ms
2023-06-10 14:05:09.114 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - -
2023-06-10 14:05:09.138 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 23.4832ms
2023-06-10 14:05:10.826 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/v2/swagger.json - -
2023-06-10 14:05:10.858 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/v2/swagger.json - - - 200 - application/json;charset=utf-8 32.5488ms
2023-06-10 07:10:15.427 +00:00 [WRN] Storing keys in a directory '/root/.aspnet/DataProtection-Keys' that may not be persisted outside of the container. Protected data will be unavailable when container is destroyed.
2023-06-10 07:10:15.489 +00:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-06-10 07:10:15.510 +00:00 [INF] Creating key {e415eb89-27e2-40f9-a4a4-b7b3c8e60532} with creation date 2023-06-10 07:10:15Z, activation date 2023-06-10 07:10:15Z, and expiration date 2023-09-08 07:10:15Z.
2023-06-10 07:10:15.542 +00:00 [WRN] No XML encryptor configured. Key {e415eb89-27e2-40f9-a4a4-b7b3c8e60532} may be persisted to storage in unencrypted form.
2023-06-10 07:10:15.551 +00:00 [INF] Writing data to file '/root/.aspnet/DataProtection-Keys/key-e415eb89-27e2-40f9-a4a4-b7b3c8e60532.xml'.
2023-06-10 07:10:15.913 +00:00 [INF] Now listening on: https://[::]:443
2023-06-10 07:10:15.917 +00:00 [INF] Now listening on: http://[::]:80
2023-06-10 07:10:15.927 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-10 07:10:15.932 +00:00 [INF] Hosting environment: Development
2023-06-10 07:10:15.936 +00:00 [INF] Content root path: /app
2023-06-10 07:10:16.951 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32768/swagger - -
2023-06-10 07:10:17.038 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32768/swagger - - - 301 0 - 81.8885ms
2023-06-10 07:10:17.076 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32768/swagger/index.html - -
2023-06-10 07:10:17.268 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32768/swagger/index.html - - - 200 - text/html;charset=utf-8 191.9943ms
2023-06-10 07:10:17.270 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32768/swagger/swagger-ui-bundle.js - -
2023-06-10 07:10:17.270 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32768/swagger/swagger-ui.css - -
2023-06-10 07:10:17.271 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32768/swagger/swagger-ui-standalone-preset.js - -
2023-06-10 07:10:17.502 +00:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2023-06-10 07:10:17.527 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32768/swagger/swagger-ui.css - - - 200 144929 text/css 256.7204ms
2023-06-10 07:10:17.537 +00:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2023-06-10 07:10:17.542 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32768/swagger/swagger-ui-standalone-preset.js - - - 200 312163 text/javascript 272.0285ms
2023-06-10 07:10:17.703 +00:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2023-06-10 07:10:17.704 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32768/swagger/swagger-ui-bundle.js - - - 200 1061536 text/javascript 434.3861ms
2023-06-10 07:10:18.004 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32768/swagger/v1/swagger.json - -
2023-06-10 07:10:18.041 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32768/swagger/favicon-32x32.png - -
2023-06-10 07:10:18.043 +00:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2023-06-10 07:10:18.044 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32768/swagger/favicon-32x32.png - - - 200 628 image/png 2.5010ms
2023-06-10 07:10:18.321 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32768/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 316.5326ms
2023-06-10 07:10:32.238 +00:00 [INF] Request starting HTTP/2 POST https://localhost:32768/api/v1/User/token application/json;+x-api-version=1.0 47
2023-06-10 07:10:33.030 +00:00 [INF] Executing endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:10:33.064 +00:00 [INF] Route matched with {action = "GetToken", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(DAHApp.Models.TokenRequestModel) on controller DAHApp.Controllers.UserController (DAHApp).
2023-06-10 07:10:53.342 +00:00 [ERR] An error occurred using the connection to database 'DAHApp' on server 'localhost'.
2023-06-10 07:10:53.371 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'DAHApp.Contexts.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server: Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server: Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
2023-06-10 07:10:53.471 +00:00 [INF] Executed action DAHApp.Controllers.UserController.GetTokenAsync (DAHApp) in 20397.6103ms
2023-06-10 07:10:53.474 +00:00 [INF] Executed endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:10:53.645 +00:00 [INF] Request finished HTTP/2 POST https://localhost:32768/api/v1/User/token application/json;+x-api-version=1.0 47 - 500 - application/json;+x-api-version=1 21407.7692ms
2023-06-10 07:20:10.223 +00:00 [WRN] Storing keys in a directory '/root/.aspnet/DataProtection-Keys' that may not be persisted outside of the container. Protected data will be unavailable when container is destroyed.
2023-06-10 07:20:10.336 +00:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-06-10 07:20:10.877 +00:00 [INF] Now listening on: https://[::]:443
2023-06-10 07:20:10.882 +00:00 [INF] Now listening on: http://[::]:80
2023-06-10 07:20:10.952 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-10 07:20:10.957 +00:00 [INF] Hosting environment: Development
2023-06-10 07:20:10.961 +00:00 [INF] Content root path: /app
2023-06-10 07:20:11.925 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32768/swagger/index.html - -
2023-06-10 07:20:12.327 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32768/swagger/index.html - - - 200 - text/html;charset=utf-8 407.3621ms
2023-06-10 07:20:12.978 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32768/swagger/v1/swagger.json - -
2023-06-10 07:20:13.271 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32768/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 292.3017ms
2023-06-10 07:21:47.220 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32768/api/v1/Secured - -
2023-06-10 07:21:47.833 +00:00 [INF] ApiKey was not authenticated. Failure message: Header Not Found.
2023-06-10 07:21:47.853 +00:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-10 07:21:47.872 +00:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-10 07:21:47.883 +00:00 [INF] AuthenticationScheme: ApiKey was challenged.
2023-06-10 07:21:47.892 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32768/api/v1/Secured - - - 401 0 - 671.1254ms
2023-06-10 07:22:00.082 +00:00 [INF] Request starting HTTP/2 POST https://localhost:32768/api/v1/User/token application/json;+x-api-version=1.0 47
2023-06-10 07:22:00.101 +00:00 [INF] Executing endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:22:00.167 +00:00 [INF] Route matched with {action = "GetToken", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(DAHApp.Models.TokenRequestModel) on controller DAHApp.Controllers.UserController (DAHApp).
2023-06-10 07:22:03.829 +00:00 [INF] Executed DbCommand (394ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[ApplicationUserId]
ORDER BY [t].[Id], [r].[ApplicationUserId]
2023-06-10 07:22:03.898 +00:00 [INF] string
2023-06-10 07:22:04.013 +00:00 [INF] Executed action DAHApp.Controllers.UserController.GetTokenAsync (DAHApp) in 3832.7244ms
2023-06-10 07:22:04.024 +00:00 [INF] Executed endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:22:04.264 +00:00 [INF] Request finished HTTP/2 POST https://localhost:32768/api/v1/User/token application/json;+x-api-version=1.0 47 - 500 - application/json;+x-api-version=1 4182.7509ms
2023-06-10 07:23:26.452 +00:00 [INF] Request starting HTTP/2 POST https://localhost:32768/api/v1/User/token application/json;+x-api-version=1.0 47
2023-06-10 07:23:26.489 +00:00 [INF] Executing endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:23:26.494 +00:00 [INF] Route matched with {action = "GetToken", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(DAHApp.Models.TokenRequestModel) on controller DAHApp.Controllers.UserController (DAHApp).
2023-06-10 07:23:26.708 +00:00 [INF] Executed DbCommand (38ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[ApplicationUserId]
ORDER BY [t].[Id], [r].[ApplicationUserId]
2023-06-10 07:23:26.722 +00:00 [INF] string
2023-06-10 07:23:26.775 +00:00 [INF] Executed action DAHApp.Controllers.UserController.GetTokenAsync (DAHApp) in 279.0824ms
2023-06-10 07:23:26.777 +00:00 [INF] Executed endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:23:26.890 +00:00 [INF] Request finished HTTP/2 POST https://localhost:32768/api/v1/User/token application/json;+x-api-version=1.0 47 - 500 - application/json;+x-api-version=1 440.4731ms
2023-06-10 07:25:53.295 +00:00 [INF] Request starting HTTP/2 POST https://localhost:32768/api/v1/User/token application/json;+x-api-version=1.0 47
2023-06-10 07:25:53.303 +00:00 [INF] Executing endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:25:53.316 +00:00 [INF] Route matched with {action = "GetToken", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(DAHApp.Models.TokenRequestModel) on controller DAHApp.Controllers.UserController (DAHApp).
2023-06-10 07:25:53.463 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[ApplicationUserId]
ORDER BY [t].[Id], [r].[ApplicationUserId]
2023-06-10 07:25:53.494 +00:00 [INF] string
2023-06-10 07:25:53.550 +00:00 [INF] Executed action DAHApp.Controllers.UserController.GetTokenAsync (DAHApp) in 230.8123ms
2023-06-10 07:25:53.554 +00:00 [INF] Executed endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:25:53.665 +00:00 [INF] Request finished HTTP/2 POST https://localhost:32768/api/v1/User/token application/json;+x-api-version=1.0 47 - 500 - application/json;+x-api-version=1 370.9036ms
2023-06-10 07:25:56.001 +00:00 [INF] Request starting HTTP/2 POST https://localhost:32768/api/v1/User/token application/json;+x-api-version=1.0 47
2023-06-10 07:25:56.003 +00:00 [INF] Executing endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:25:56.004 +00:00 [INF] Route matched with {action = "GetToken", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(DAHApp.Models.TokenRequestModel) on controller DAHApp.Controllers.UserController (DAHApp).
2023-06-10 07:25:56.082 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[ApplicationUserId]
ORDER BY [t].[Id], [r].[ApplicationUserId]
2023-06-10 07:25:56.095 +00:00 [INF] string
2023-06-10 07:25:56.149 +00:00 [INF] Executed action DAHApp.Controllers.UserController.GetTokenAsync (DAHApp) in 143.3354ms
2023-06-10 07:25:56.151 +00:00 [INF] Executed endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:25:56.251 +00:00 [INF] Request finished HTTP/2 POST https://localhost:32768/api/v1/User/token application/json;+x-api-version=1.0 47 - 500 - application/json;+x-api-version=1 249.6544ms
2023-06-10 07:26:16.192 +00:00 [INF] Request starting HTTP/2 POST https://localhost:32768/api/v1/User/token application/json;+x-api-version=1.0 57
2023-06-10 07:26:16.195 +00:00 [INF] Executing endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:26:16.197 +00:00 [INF] Route matched with {action = "GetToken", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(DAHApp.Models.TokenRequestModel) on controller DAHApp.Controllers.UserController (DAHApp).
2023-06-10 07:26:16.299 +00:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[ApplicationUserId]
ORDER BY [t].[Id], [r].[ApplicationUserId]
2023-06-10 07:26:16.715 +00:00 [INF] vongsi@dah.com
2023-06-10 07:26:16.965 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2023-06-10 07:26:17.010 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-06-10 07:26:18.217 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-06-10 07:26:18.256 +00:00 [INF] Executing OkObjectResult, writing value of type 'DAHApp.Models.AuthenticationModel'.
2023-06-10 07:26:18.309 +00:00 [INF] Executed action DAHApp.Controllers.UserController.GetTokenAsync (DAHApp) in 2110.627ms
2023-06-10 07:26:18.311 +00:00 [INF] Executed endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:26:18.313 +00:00 [INF] Request finished HTTP/2 POST https://localhost:32768/api/v1/User/token application/json;+x-api-version=1.0 57 - 200 - application/json;+charset=utf-8;+x-api-version=1 2120.9337ms
2023-06-10 07:29:53.076 +00:00 [WRN] Storing keys in a directory '/root/.aspnet/DataProtection-Keys' that may not be persisted outside of the container. Protected data will be unavailable when container is destroyed.
2023-06-10 07:29:53.212 +00:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-06-10 07:29:53.248 +00:00 [INF] Creating key {25e0896b-ff77-4a92-8017-ba9f5ecc3fd8} with creation date 2023-06-10 07:29:53Z, activation date 2023-06-10 07:29:53Z, and expiration date 2023-09-08 07:29:53Z.
2023-06-10 07:29:53.293 +00:00 [WRN] No XML encryptor configured. Key {25e0896b-ff77-4a92-8017-ba9f5ecc3fd8} may be persisted to storage in unencrypted form.
2023-06-10 07:29:53.307 +00:00 [INF] Writing data to file '/root/.aspnet/DataProtection-Keys/key-25e0896b-ff77-4a92-8017-ba9f5ecc3fd8.xml'.
2023-06-10 07:29:53.811 +00:00 [INF] Now listening on: https://[::]:443
2023-06-10 07:29:53.817 +00:00 [INF] Now listening on: http://[::]:80
2023-06-10 07:29:53.836 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-10 07:29:53.843 +00:00 [INF] Hosting environment: Development
2023-06-10 07:29:53.849 +00:00 [INF] Content root path: /app
2023-06-10 07:29:55.000 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32773/swagger - -
2023-06-10 07:29:55.087 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32773/swagger - - - 301 0 - 82.1311ms
2023-06-10 07:29:55.124 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32773/swagger/index.html - -
2023-06-10 07:29:55.309 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32773/swagger/index.html - - - 200 - text/html;charset=utf-8 184.8615ms
2023-06-10 07:29:55.333 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32773/swagger/swagger-ui.css - -
2023-06-10 07:29:55.333 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32773/swagger/swagger-ui-standalone-preset.js - -
2023-06-10 07:29:55.333 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32773/swagger/swagger-ui-bundle.js - -
2023-06-10 07:29:55.530 +00:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2023-06-10 07:29:55.557 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32773/swagger/swagger-ui.css - - - 200 144929 text/css 223.3457ms
2023-06-10 07:29:55.563 +00:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2023-06-10 07:29:55.573 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32773/swagger/swagger-ui-standalone-preset.js - - - 200 312163 text/javascript 240.5431ms
2023-06-10 07:29:55.745 +00:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2023-06-10 07:29:55.747 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32773/swagger/swagger-ui-bundle.js - - - 200 1061536 text/javascript 414.5640ms
2023-06-10 07:29:55.998 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32773/swagger/v1/swagger.json - -
2023-06-10 07:29:56.031 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32773/swagger/favicon-32x32.png - -
2023-06-10 07:29:56.033 +00:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2023-06-10 07:29:56.035 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32773/swagger/favicon-32x32.png - - - 200 628 image/png 4.6299ms
2023-06-10 07:29:56.239 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32773/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 241.8101ms
2023-06-10 07:32:10.156 +00:00 [INF] Request starting HTTP/2 GET https://localhost:32773/api/v1/Secured - -
2023-06-10 07:32:11.848 +00:00 [INF] ApiKey was not authenticated. Failure message: Header Not Found.
2023-06-10 07:32:11.859 +00:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-10 07:32:11.876 +00:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-10 07:32:11.883 +00:00 [INF] AuthenticationScheme: ApiKey was challenged.
2023-06-10 07:32:11.892 +00:00 [INF] Request finished HTTP/2 GET https://localhost:32773/api/v1/Secured - - - 401 0 - 1736.2505ms
2023-06-10 07:35:54.749 +00:00 [INF] Request starting HTTP/2 POST https://localhost:32773/api/v1/User/token application/json;+x-api-version=1.0 57
2023-06-10 07:35:54.780 +00:00 [INF] Executing endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:35:54.849 +00:00 [INF] Route matched with {action = "GetToken", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(DAHApp.Models.TokenRequestModel) on controller DAHApp.Controllers.UserController (DAHApp).
2023-06-10 07:36:00.167 +00:00 [INF] Executed DbCommand (274ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[ApplicationUserId]
ORDER BY [t].[Id], [r].[ApplicationUserId]
2023-06-10 07:36:00.476 +00:00 [INF] vongsi@dah.com
2023-06-10 07:36:00.677 +00:00 [INF] Executed DbCommand (15ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2023-06-10 07:36:00.734 +00:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-06-10 07:36:01.777 +00:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-06-10 07:36:01.816 +00:00 [INF] Executing OkObjectResult, writing value of type 'DAHApp.Models.AuthenticationModel'.
2023-06-10 07:36:01.847 +00:00 [INF] Executed action DAHApp.Controllers.UserController.GetTokenAsync (DAHApp) in 6988.1135ms
2023-06-10 07:36:01.855 +00:00 [INF] Executed endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 07:36:01.894 +00:00 [INF] Request finished HTTP/2 POST https://localhost:32773/api/v1/User/token application/json;+x-api-version=1.0 57 - 200 - application/json;+charset=utf-8;+x-api-version=1 7167.2918ms
2023-06-10 07:36:29.038 +00:00 [INF] Request starting HTTP/1.1 GET https://localhost:32773/api/v2/Secured - -
2023-06-10 07:36:29.283 +00:00 [INF] Executed DbCommand (36ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 07:36:29.373 +00:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 07:36:29.387 +00:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 07:36:29.395 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 07:36:29.402 +00:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 14.0056ms
2023-06-10 07:36:29.404 +00:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 07:36:29.411 +00:00 [INF] Request finished HTTP/1.1 GET https://localhost:32773/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 373.1246ms
2023-06-10 07:36:32.003 +00:00 [INF] Request starting HTTP/1.1 GET https://localhost:32773/api/v2/Secured - -
2023-06-10 07:36:32.048 +00:00 [INF] Executed DbCommand (18ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 07:36:32.054 +00:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 07:36:32.060 +00:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 07:36:32.062 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 07:36:32.064 +00:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 2.6549ms
2023-06-10 07:36:32.065 +00:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 07:36:32.067 +00:00 [INF] Request finished HTTP/1.1 GET https://localhost:32773/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 63.3973ms
2023-06-10 07:36:33.101 +00:00 [INF] Request starting HTTP/1.1 GET https://localhost:32773/api/v2/Secured - -
2023-06-10 07:36:33.141 +00:00 [INF] Executed DbCommand (33ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 07:36:33.148 +00:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 07:36:33.149 +00:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 07:36:33.152 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 07:36:33.154 +00:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 2.4493ms
2023-06-10 07:36:33.155 +00:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 07:36:33.158 +00:00 [INF] Request finished HTTP/1.1 GET https://localhost:32773/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 56.9345ms
2023-06-10 07:36:34.401 +00:00 [INF] Request starting HTTP/1.1 GET https://localhost:32773/api/v2/Secured - -
2023-06-10 07:36:34.428 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 07:36:34.432 +00:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 07:36:34.433 +00:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 07:36:34.434 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 07:36:34.435 +00:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 1.5394ms
2023-06-10 07:36:34.436 +00:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 07:36:34.437 +00:00 [INF] Request finished HTTP/1.1 GET https://localhost:32773/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 36.6873ms
2023-06-10 14:39:07.673 +07:00 [INF] User profile is available. Using 'C:\Users\Vongsi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-10 14:39:08.278 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-10 14:39:08.286 +07:00 [INF] Hosting environment: Development
2023-06-10 14:39:08.295 +07:00 [INF] Content root path: D:\Dev\Dotnet\API\DAHApp
2023-06-10 14:39:08.373 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/index.html - -
2023-06-10 14:39:09.254 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - -
2023-06-10 14:39:09.254 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_vs/browserLink - -
2023-06-10 14:39:09.256 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/index.html - - - 200 - text/html;charset=utf-8 884.9809ms
2023-06-10 14:39:09.279 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 23.5280ms
2023-06-10 14:39:09.392 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 137.7608ms
2023-06-10 14:39:09.450 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - -
2023-06-10 14:39:09.866 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 415.4718ms
2023-06-10 14:46:26.602 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/api/v1/Secured - -
2023-06-10 14:46:28.520 +07:00 [INF] ApiKey was not authenticated. Failure message: Header Not Found.
2023-06-10 14:46:28.536 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-10 14:46:28.556 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-10 14:46:28.572 +07:00 [INF] AuthenticationScheme: ApiKey was challenged.
2023-06-10 14:46:28.584 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/api/v1/Secured - - - 401 - - 2001.9218ms
2023-06-10 14:46:51.203 +07:00 [INF] Request starting HTTP/2 POST https://localhost:44376/api/v1/User/token application/json;+x-api-version=1.0 57
2023-06-10 14:46:51.251 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 14:46:51.344 +07:00 [INF] Route matched with {action = "GetToken", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(DAHApp.Models.TokenRequestModel) on controller DAHApp.Controllers.UserController (DAHApp).
2023-06-10 14:46:58.270 +07:00 [INF] Executed DbCommand (267ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[ApplicationUserId]
ORDER BY [t].[Id], [r].[ApplicationUserId]
2023-06-10 14:46:58.761 +07:00 [INF] vongsi@dah.com
2023-06-10 14:46:59.266 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2023-06-10 14:46:59.357 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-06-10 14:47:00.502 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-06-10 14:47:00.537 +07:00 [INF] Executing OkObjectResult, writing value of type 'DAHApp.Models.AuthenticationModel'.
2023-06-10 14:47:00.598 +07:00 [INF] Executed action DAHApp.Controllers.UserController.GetTokenAsync (DAHApp) in 9239.0025ms
2023-06-10 14:47:00.600 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.UserController.GetTokenAsync (DAHApp)'
2023-06-10 14:47:00.622 +07:00 [INF] Request finished HTTP/2 POST https://localhost:44376/api/v1/User/token application/json;+x-api-version=1.0 57 - 200 - application/json;+charset=utf-8;+x-api-version=1 9418.9654ms
2023-06-10 14:47:24.080 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 14:47:24.393 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 14:47:24.490 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 14:47:24.505 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 14:47:24.516 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 14:47:24.520 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 11.8661ms
2023-06-10 14:47:24.520 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 14:47:24.521 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 441.3389ms
2023-06-10 14:47:27.341 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 14:47:27.388 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 14:47:27.397 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 14:47:27.397 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 14:47:27.398 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 14:47:27.400 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 2.418ms
2023-06-10 14:47:27.400 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 14:47:27.401 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 60.0771ms
2023-06-10 14:55:29.199 +07:00 [INF] User profile is available. Using 'C:\Users\Vongsi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-10 14:55:29.765 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-10 14:55:29.772 +07:00 [INF] Hosting environment: Development
2023-06-10 14:55:29.777 +07:00 [INF] Content root path: D:\Dev\Dotnet\API\DAHApp
2023-06-10 14:55:29.849 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/index.html - -
2023-06-10 14:55:30.720 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - -
2023-06-10 14:55:30.720 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_vs/browserLink - -
2023-06-10 14:55:30.723 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/index.html - - - 200 - text/html;charset=utf-8 878.7245ms
2023-06-10 14:55:30.750 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 24.2249ms
2023-06-10 14:55:30.834 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 115.0059ms
2023-06-10 14:55:30.897 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - -
2023-06-10 14:55:31.276 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 378.8491ms
2023-06-10 22:54:29.272 +07:00 [INF] User profile is available. Using 'C:\Users\Vongsi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-10 22:54:29.935 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-10 22:54:29.944 +07:00 [INF] Hosting environment: Development
2023-06-10 22:54:29.951 +07:00 [INF] Content root path: D:\Dev\Dotnet\API\DAHApp
2023-06-10 22:54:30.026 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/index.html - -
2023-06-10 22:54:31.050 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - -
2023-06-10 22:54:31.050 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_vs/browserLink - -
2023-06-10 22:54:31.054 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/index.html - - - 200 - text/html;charset=utf-8 1016.4546ms
2023-06-10 22:54:31.073 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 22.4940ms
2023-06-10 22:54:31.200 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 149.7369ms
2023-06-10 22:54:31.284 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - -
2023-06-10 22:54:31.748 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 464.0293ms
2023-06-10 22:54:53.362 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 22:55:02.093 +07:00 [INF] Executed DbCommand (238ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 22:55:02.711 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 22:55:02.764 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 22:55:02.800 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 22:55:02.824 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 46.2824ms
2023-06-10 22:55:02.826 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 22:55:02.862 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 9506.7349ms
2023-06-10 22:55:07.436 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured - -
2023-06-10 22:55:08.726 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/06/2023 5:52:37 AM', Current time (UTC): '10/06/2023 3:55:08 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-10 22:55:08.809 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/06/2023 5:52:37 AM', Current time (UTC): '10/06/2023 3:55:08 PM'.
2023-06-10 22:55:08.813 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/06/2023 5:52:37 AM', Current time (UTC): '10/06/2023 3:55:08 PM'.
2023-06-10 22:55:08.843 +07:00 [INF] ApiKey was not authenticated. Failure message: Header Not Found.
2023-06-10 22:55:08.847 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-10 22:55:08.869 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-10 22:55:08.882 +07:00 [INF] AuthenticationScheme: ApiKey was challenged.
2023-06-10 22:55:08.889 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured - - - 401 - - 1453.1855ms
2023-06-10 22:55:14.998 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 22:55:15.105 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 22:55:15.114 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 22:55:15.118 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 22:55:15.120 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 22:55:15.123 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 3.7486ms
2023-06-10 22:55:15.123 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 22:55:15.124 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 126.6614ms
2023-06-10 23:22:30.888 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured - -
2023-06-10 23:22:30.902 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/06/2023 5:52:37 AM', Current time (UTC): '10/06/2023 4:22:30 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-10 23:22:30.903 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/06/2023 5:52:37 AM', Current time (UTC): '10/06/2023 4:22:30 PM'.
2023-06-10 23:22:30.903 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/06/2023 5:52:37 AM', Current time (UTC): '10/06/2023 4:22:30 PM'.
2023-06-10 23:22:30.913 +07:00 [INF] ApiKey was not authenticated. Failure message: Header Not Found.
2023-06-10 23:22:30.914 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-10 23:22:30.915 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-10 23:22:30.923 +07:00 [INF] AuthenticationScheme: ApiKey was challenged.
2023-06-10 23:22:30.925 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured - - - 401 - - 36.5842ms
2023-06-10 23:22:38.453 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 23:22:38.707 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 23:22:38.715 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 23:22:38.715 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 23:22:38.716 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 23:22:38.719 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 3.4625ms
2023-06-10 23:22:38.719 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 23:22:38.720 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 267.6979ms
2023-06-10 23:22:43.843 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - -
2023-06-10 23:22:43.872 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 23:22:43.899 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 23:22:43.929 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 23:22:44.094 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 23:22:44.178 +07:00 [INF] Executing FileContentResult, sending file with download name 'fc924b1989aa443da5190aa8df7b8f00.jpg' ...
2023-06-10 23:22:44.198 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 268.4269ms
2023-06-10 23:22:44.201 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 23:22:44.203 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - - - 200 47530 image/jpeg;+x-api-version=1 359.6880ms
2023-06-10 23:22:52.934 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 23:22:52.957 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 23:22:52.962 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 23:22:52.962 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 23:22:52.965 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 23:22:52.968 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 4.6245ms
2023-06-10 23:22:52.968 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 23:22:52.970 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 35.6726ms
2023-06-10 23:24:21.738 +07:00 [INF] User profile is available. Using 'C:\Users\Vongsi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-10 23:24:22.042 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-10 23:24:22.045 +07:00 [INF] Hosting environment: Development
2023-06-10 23:24:22.049 +07:00 [INF] Content root path: D:\Dev\Dotnet\API\DAHApp
2023-06-10 23:24:22.084 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/index.html - -
2023-06-10 23:24:22.692 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - -
2023-06-10 23:24:22.692 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/_vs/browserLink - -
2023-06-10 23:24:22.697 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/index.html - - - 200 - text/html;charset=utf-8 614.6438ms
2023-06-10 23:24:22.716 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 23.1242ms
2023-06-10 23:24:22.775 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 82.8700ms
2023-06-10 23:24:22.858 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - -
2023-06-10 23:24:23.088 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44376/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 230.0350ms
2023-06-10 23:25:13.607 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v2/Secured - -
2023-06-10 23:25:19.097 +07:00 [INF] Executed DbCommand (170ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 23:25:19.735 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 23:25:19.777 +07:00 [INF] Route matched with {action = "GetSecuredData", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecuredData() on controller DAHApp.Controllers.v2.SecuredController (DAHApp).
2023-06-10 23:25:19.806 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-10 23:25:19.835 +07:00 [INF] Executed action DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp) in 39.7912ms
2023-06-10 23:25:19.837 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v2.SecuredController.GetSecuredData (DAHApp)'
2023-06-10 23:25:19.868 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v2/Secured - - - 200 - text/plain;+charset=utf-8;+x-api-version=2 6305.2319ms
2023-06-10 23:25:23.711 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - -
2023-06-10 23:25:23.822 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__apiKeyToValidate_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[UserID], [t].[Value], [t].[Id0], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[Email], [t].[EmailConfirmed], [t].[FirstName], [t].[LastName], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [r].[ApplicationUserId], [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[Token]
FROM (
    SELECT TOP(2) [u].[ID], [u].[UserID], [u].[Value], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [UserApiKeys] AS [u]
    INNER JOIN [AspNetUsers] AS [a] ON [u].[UserID] = [a].[Id]
    WHERE [u].[Value] = @__apiKeyToValidate_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id0] = [r].[ApplicationUserId]
ORDER BY [t].[ID], [t].[Id0], [r].[ApplicationUserId]
2023-06-10 23:25:23.836 +07:00 [INF] Executing endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 23:25:23.870 +07:00 [INF] Route matched with {action = "GetFile", controller = "Secured"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFile(System.String) on controller DAHApp.Controllers.v1.SecuredController (DAHApp).
2023-06-10 23:25:24.032 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Content], [d].[Name], [d].[Type]
FROM [DocumentModel] AS [d]
WHERE [d].[Id] = @__get_Item_0
2023-06-10 23:25:24.117 +07:00 [INF] Executing FileContentResult, sending file with download name 'fc924b1989aa443da5190aa8df7b8f00.jpg' ...
2023-06-10 23:25:24.136 +07:00 [INF] Executed action DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp) in 265.6475ms
2023-06-10 23:25:24.138 +07:00 [INF] Executed endpoint 'DAHApp.Controllers.v1.SecuredController.GetFile (DAHApp)'
2023-06-10 23:25:24.140 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44376/api/v1/Secured/download-file?id=b1303fed-a6c1-4cbb-3a00-08db697f4a50 - - - 200 47530 image/jpeg;+x-api-version=1 428.9680ms
